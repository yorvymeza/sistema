/*
 * ESTILOS MODERNOS PARA CALCULADORA DE GESTIÓN DE TRADING
 * Basado en tonos oscuros para enfoque y colores de señal (verde/rojo)
 */

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

:root {
    --color-fondo: #1e1e2f; /* Fondo oscuro principal */
    --color-tarjeta: #27293d; /* Fondo de las cajas y columnas */
    --color-texto-claro: #f0f0f0; /* Texto principal */
    --color-texto-secundario: #a0a2b0; /* Texto de descripción */
    
    --color-verde: #28a745; /* Verde de éxito / ganancia */
    --color-rojo: #dc3545; /* Rojo de fallo / pérdida */
    --color-azul-acento: #007bff; /* Azul para campos editables */
    
    --sombra-suave: 0 4px 12px rgba(0, 0, 0, 0.4);
    --borde-radio: 8px;
}

body {
    font-family: 'Inter', sans-serif;
    margin: 0;
    padding: 20px;
    background-color: var(--color-fondo);
    color: var(--color-texto-claro);
    line-height: 1.6;
}

/* =================== LAYOUT PRINCIPAL =================== */

.contenedor-principal {
    display: flex;
    max-width: 1300px;
    margin: 0 auto;
    gap: 30px;
}

.columna {
    padding: 20px;
    background-color: var(--color-tarjeta);
    border-radius: var(--borde-radio);
    box-shadow: var(--sombra-suave);
    min-height: 80vh;
}

.calculadora {
    flex: 0 0 350px; /* Ancho fijo para la calculadora */
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.historial {
    flex: 1;
}

/* =================== TÍTULOS Y FASES =================== */

h2.titulo-historial {
    color: var(--color-texto-claro);
    font-weight: 600;
    margin-top: 0;
    border-bottom: 2px solid #3c3e53;
    padding-bottom: 10px;
    margin-bottom: 20px;
}

.fase {
    padding: 15px;
    background-color: #313349;
    border-radius: var(--borde-radio);
    border-left: 4px solid var(--color-azul-acento); /* Barra de acento */
}

.fase h3 {
    margin-top: 0;
    margin-bottom: 15px;
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--color-texto-claro);
}

/* =================== CAJAS DE VALOR (CAPITAL Y P&L) =================== */

.caja-valor {
    padding: 15px 20px;
    border-radius: var(--borde-radio);
    margin-bottom: 10px;
    text-align: center;
}

/* Capital Total (Verde oscuro) */
.caja-valor.verde {
    background: linear-gradient(135deg, #2ecc71, #27ae60);
    box-shadow: 0 5px 15px rgba(40, 167, 69, 0.5);
    color: #fff;
    margin-bottom: 20px;
}

.caja-valor .etiqueta {
    display: block;
    font-size: 0.85rem;
    font-weight: 400;
    opacity: 0.8;
}

.valor-grande {
    font-size: 2.5rem;
    font-weight: 700;
    display: block;
    margin-top: 5px;
}

/* FASE 05 - Resumen P&L */
.fase-05 .resumen-container {
    display: flex;
    justify-content: space-between;
    gap: 10px;
    margin-top: 10px;
}

.fase-05 .caja-valor {
    flex: 1;
    padding: 10px;
    border-radius: var(--borde-radio);
    text-align: center;
}

.verde-claro {
    background-color: #3d514a; /* Verde oscuro suave */
    border: 1px solid var(--color-verde);
    color: var(--color-verde);
}

.roja-clara {
    background-color: #513d3d; /* Rojo oscuro suave */
    border: 1px solid var(--color-rojo);
    color: var(--color-rojo);
}

.valor-mediano {
    font-size: 1.2rem;
    font-weight: 700;
    display: block;
    margin-top: 3px;
}

/* =================== CAMPOS DE ENTRADA Y RESULTADO =================== */

.campo-entrada {
    margin-bottom: 15px;
}

.campo-entrada label {
    display: block;
    font-size: 0.9rem;
    font-weight: 600;
    margin-bottom: 5px;
}

.editable-azul {
    width: calc(100% - 10px);
    padding: 8px;
    border-radius: 4px;
    border: 1px solid #007bff50;
    background-color: #313349;
    color: var(--color-texto-claro);
    font-size: 1rem;
    transition: all 0.3s;
}

.editable-azul:focus {
    border-color: var(--color-azul-acento);
    box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
    outline: none;
}

/* Clase para el input de valor que acompaña a % */
.campo-entrada input[type="number"] {
    display: inline-block;
    width: 60%;
    margin-right: 5px;
}

.campo-entrada span:not(.descripcion) {
    font-weight: 600;
    color: var(--color-azul-acento);
}

.descripcion {
    display: block;
    font-size: 0.75rem;
    color: var(--color-texto-secundario);
    margin-top: 5px;
}

.campo-resultado {
    margin-bottom: 15px;
    padding: 10px;
    background-color: #3c3e53;
    border-radius: 4px;
    border-left: 3px solid var(--color-verde);
}

.campo-resultado label {
    font-size: 0.85rem;
    color: var(--color-texto-secundario);
    display: block;
}

.resultado-verde {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--color-verde);
    display: block;
    margin-top: 3px;
}

/* =================== FASE 03 (CONTADORES) =================== */

.fase-03 .contador-container {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
}

.contador {
    flex: 1;
    padding: 15px 10px;
    border: none;
    border-radius: var(--borde-radio);
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    color: var(--color-texto-claro);
    font-size: 1.8rem;
    font-weight: 700;
    text-align: center;
}

.contador:active {
    transform: translateY(1px);
}

.contador:disabled {
    opacity: 0.5;
    cursor: not-allowed !important;
}

.contador label {
    display: block;
    font-size: 0.8rem;
    font-weight: 400;
    margin-bottom: 5px;
    opacity: 0.8;
}

.contador-ganada {
    background-color: var(--color-verde);
    box-shadow: 0 4px 8px rgba(40, 167, 69, 0.4);
}

.contador-perdida {
    background-color: var(--color-rojo);
    box-shadow: 0 4px 8px rgba(220, 53, 69, 0.4);
}

.cantidad-faltante {
    text-align: center;
    padding: 10px;
    background-color: #3c3e53;
    border-radius: 4px;
}

.cantidad-faltante label {
    font-size: 0.85rem;
    color: var(--color-texto-secundario);
}

#cantidad-faltante {
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--color-azul-acento);
    display: block;
}

/* =================== FASE 04 (GRÁFICA) =================== */

.grafica-container {
    height: 250px; /* Altura fija para la gráfica */
    margin-top: 15px;
    background-color: #313349;
    padding: 10px;
    border-radius: 4px;
}

/* =================== HISTORIAL Y CONTROLES =================== */

.movimiento-controles {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
    align-items: center;
}

.movimiento-controles input[type="date"],
.movimiento-controles input[type="number"] {
    flex: 1;
}

.btn-movimiento {
    padding: 10px 15px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 600;
    transition: background-color 0.2s, box-shadow 0.2s;
    color: #fff;
    flex-shrink: 0;
}

.btn-inversion {
    background-color: var(--color-verde);
}

.btn-inversion:hover {
    background-color: #218838;
}

.btn-retirada {
    background-color: var(--color-rojo);
}

.btn-retirada:hover {
    background-color: #c82333;
}

#btn-descargar-excel {
    width: 100%;
    margin-top: 0 !important;
    background-color: var(--color-azul-acento);
}

#btn-descargar-excel:hover {
    background-color: #0056b3;
}

/* =================== TABLA DE HISTORIAL =================== */

.tabla-historial-container {
    overflow-y: auto;
    max-height: 450px; /* Limita la altura de la tabla para scroll */
}

#tabla-movimientos {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.9rem;
    background-color: #313349;
}

#tabla-movimientos th {
    background-color: #3c3e53;
    color: var(--color-texto-claro);
    padding: 12px 15px;
    text-align: left;
    font-weight: 600;
    position: sticky;
    top: 0; /* Fija la cabecera al hacer scroll */
    z-index: 10;
}

#tabla-movimientos td {
    padding: 10px 15px;
    border-bottom: 1px solid #3c3e53;
}

#tabla-movimientos tbody tr:last-child td {
    border-bottom: none;
}

/* Colores para las filas del historial */
.inversion td {
    color: var(--color-verde);
}

.retirada td {
    color: var(--color-rojo);
}

.ganancia-op td {
    color: #79f179; /* Verde claro para ganancia de operación */
}

/* Media Queries para Responsive Design (Mobile) */
@media (max-width: 850px) {
    .contenedor-principal {
        flex-direction: column;
        gap: 15px;
    }

    .calculadora {
        flex: auto;
        width: 100%;
        padding: 15px;
    }

    .historial {
        padding: 15px;
    }
    
    .movimiento-controles {
        flex-wrap: wrap;
    }
    
    .movimiento-controles input {
        width: 100%;
        flex: none;
    }
    
    .btn-movimiento {
        flex: 1;
    }
}
